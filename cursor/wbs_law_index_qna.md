# 법령정보 색인 + QnA 서비스 WBS (초안)

작성일: 2026-01-28  
작성자: (작성자 이름)  
대상: PM/프로젝트 이해관계자

---

## 1. 배경 / 현재 상태 요약

- 현재 PM으로부터 받은 요구: **“법령정보를 색인해서 QnA 서비스를 만든다”**(상위 목표만 제공됨)
- 설계/세부 구현 방향(파이프라인, 스키마, 연계법령 처리, OFFLINE/ONLINE 모드 등)은 **현 시점에서 내가 주도하여 정의 중**
- PoC 데이터로 **전기사업법**을 기준으로:
  - 조문/항/호 구조 JSON 확보(`전기사업법.json`)
  - HTML 기반 연계법령 추출/병합 시도(`전기사업법.enriched.json`)
  - 다만 **연계법령 정규화 품질(그룹핑/범위표현/onclick 처리)이 아직 미완성**인 상태

---

## 2. 범위 정의(필수 확정)

### 2.1 대상 규모 정의 (PM 확인 필요)
PM이 말한 “약 5천건”의 의미를 아래 중 **1개로 확정해야 일정이 고정됨.

- A) 법령 “문서 수” 5천 (현행법령 subset?)
- B) 특정 도메인(전력/에너지/산업 등)만 5천
- C) 조문 수/조항 수 기준 5천
- D) 내부 구매/계약/반입 데이터 범위가 5천

> ✅ **결정 포인트:** “5천”이 문서 수인지/조문 수인지/대상 도메인인지 확정 필요

### 2.2 이번 단계(1차) 범위 제안
- (필수) 조문 단위 색인: 법령명/조문번호/조문제목/조문내용 + 메타
- (필수) QnA 프롬프트/응답 포맷: 근거 조문 인용 포함
- (선택) 연계법령:
  - MVP: **그룹핑 + 범위표현 처리 + 링크 제공**까지
  - 운영: onclick resolve, 캐시, 회귀테스트까지

---

## 3. 산출물(Deliverables)

### 공통 산출물
- D1) 색인 스키마(최종 JSON/DB 컬럼) + 키 규칙 문서
- D2) 색인 파이프라인 코드(입력 → 정규화 → 색인)
- D3) 연계법령 추출/정규화/병합 코드 + 품질 리포트
- D4) QnA 프롬프트(베이스라인) + 응답 템플릿
- D5) 최소 평가셋(질문-정답-근거 조문) + 리그레션 체크 스크립트
- D6) 운영 가이드(재색인/증분/로그/에러 표준)

---

## 4. 일정 시나리오(3안)

> **전제:** 1인 기준, 설계/구현/검증 모두 포함

- **POC(10 영업일)**: “돌아감” 중심(링크 제공 위주, 정규화 최소)
- **MVP(25 영업일)**: 데모/내부 사용 가능(연계법령 그룹핑+범위표현 처리 포함)
- **운영(40 영업일)**: 대량 처리/증분/회귀테스트/품질지표 포함

---

## 5. WBS (MVP 25 영업일 기준)

> 날짜는 “영업일” 기준이며, 시작일은 2026-01-28로 가정(조정 가능)

### 5.1 요약 테이블

| WBS | 작업 | 기간(영업일) | 산출물 | 의존/비고 |
|---|---|---:|---|---|
| 0 | 범위/정의 확정 | 2 | D1 초안, 범위 합의 | PM이 “5천” 정의 확정 |
| 1 | 데이터 모델/스키마 고정 | 2 | D1 확정 | 0 완료 필요 |
| 2 | 색인 파이프라인 안정화 | 6 | D2 | 1 완료 필요 |
| 3 | 연계법령 추출/정규화 개선 | 8 | D3 | 2와 병행 가능(부분) |
| 4 | QnA 프롬프트/응답 포맷 | 5 | D4 | 1 완료 필요 |
| 5 | 평가셋/리그레션/품질 리포트 | 2 | D5 | 2~4 결과 필요 |
| 6 | 문서화/운영 가이드 | 0~2 | D6 | 필요 시 포함 |

> 총 25일(문서화 포함 시 27일까지 늘 수 있음)

---

## 6. WBS 상세(작업 단위/검수 기준)

### 0) 범위/정의 확정 (2일)
- 작업
  - “5천” 정의 확정(문서 수/조문 수/도메인 subset)
  - 1차 목표: POC/MVP/운영 중 어느 수준인지 결정
  - 질문 응답 형태(Yes/No 중심 vs 관련조문 안내 중심) 확정
- 완료 기준
  - 범위 문서 1p + 승인(이메일/코멘트) 확보

### 1) 데이터 모델/스키마 고정 (2일)
- 작업
  - 조문 키 규칙 확정(법령명|제n조|제m항|제k호|가목 …)
  - `related_laws` 최종 스키마 확정
    - target: lawName/lawId/ref(range 포함)
    - evidence: anchorText/href/onclick/snippet/groupAnchors
- 완료 기준
  - 샘플 3개 조문에 대해 “원하는 최종 JSON 형태”로 출력 가능

### 2) 색인 파이프라인 안정화 (6일)
- 작업
  - 입력(JSON) → 정규화 → 색인용 레코드 생성
  - 중복 제거/필드 누락 처리/에러 표준
  - 증분 처리(업데이트 기준: updated_at 등) 기본 골격
- 완료 기준
  - 전기사업법 전체 재처리 시 스키마 일관성 유지
  - 실패 시 재시도 가능(에러 리포트 출력)

### 3) 연계법령 추출/정규화 개선 (8일) **(리스크 핵심)**
- 작업(핵심 룰)
  - (R1) **연속 a태그 그룹핑**: “법령명 + 조문”으로 붙어있는 링크는 하나의 참조로 합치기
  - (R2) **문맥 분리**: “대통령령/부령”은 별도 delegation으로 분리(법령명+조문과 합치지 않기)
  - (R3) **범위표현 파싱**: “제n항부터 제m항까지”, “제1호부터 제5호까지” → range로 저장
  - (R4) onclick 처리: 가능한 경우 URL로 resolve, 불가하면 raw 보존 + confidence 낮게
  - (R5) 별표/표/서식은 URL 우선 노출(화면단 링크 제공)
- 완료 기준
  - 샘플 케이스(5~10개)에서 사람이 봤을 때 “정상적인 related_laws”가 생성됨
  - 품질 리포트(조문당 평균 참조 수, resolve 비율) 출력

### 4) QnA 프롬프트/응답 포맷 (5일)
- 작업
  - 답변 템플릿(결론/근거조문/링크/예외조건)
  - “Yes/No” 필요한 질문군 vs “관련조문 안내” 질문군 분리
  - hallucination 방지: 근거 조문 없으면 “근거 부족”으로 처리
- 완료 기준
  - 평가셋 50문항 기준 1차 베이스라인 결과 공유 가능

### 5) 평가셋/리그레션/품질 리포트 (2일)
- 작업
  - 최소 50~200문항(내부 사용 목적이면 50도 가능)
  - 색인/프롬프트 변경 시 결과 비교 스크립트
- 완료 기준
  - 릴리즈 전후 품질 비교 가능(정량+샘플)

### 6) 문서화/운영 가이드 (0~2일)
- 작업
  - 재색인/증분/로그/오류 대응
  - OFFLINE/ONLINE 모드 실행법
- 완료 기준
  - 신규 인원이 따라 하면 재현 가능

---

## 7. 리스크 & 완화

- **연계법령 정규화 품질 리스크(최대)**
  - 완화: “MVP 기준 품질 목표”를 낮추고(링크/범위까지만) 운영 단계에서 resolve/정밀화
- **대상 범위(5천) 불명확**
  - 완화: 범위 확정 전엔 일정 확정 불가. POC→MVP로 단계화
- **HTML 구조 변동/예외 케이스 증가**
  - 완화: 룰 기반 + 케이스 추가 테스트(스냅샷)로 회귀 방지

---

## 8. PM 설득 포인트(핵심 메시지)

- “색인한다”는 말은 실제로는 **스키마 결정, 파서/정규화, 연계법령 품질, 평가/회귀테스트**까지 포함하는 작업이라서  
  **설계 없이 바로 날짜를 못 박으면 리워크가 크게 난다.**
- 그래서 **POC(10일) → MVP(25일) → 운영(40일)** 3단계로 제시하는 게 가장 안전하다.
- 범위(5천 정의)와 답변 목표(Yes/No vs 관련조문 안내)를 확정하면, 그때 최종 일정이 고정된다.

---

## 9. PM 확인 질문(이대로 던지기)

1) “5천건”은 **법령 문서 수/조문 수/특정 도메인 subset** 중 무엇인가요?  
2) 1차 서비스는 **Yes/No 결론형 답변**이 필수인가요, 아니면 **관련조문 안내형**으로도 괜찮나요?  
3) 연계법령은 1차에 **(A) 링크 제공 수준**이면 충분한가요, 아니면 **(B) 조문까지 정밀 정규화**가 필요하나요?

---
